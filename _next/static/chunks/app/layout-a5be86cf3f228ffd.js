(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9391:function(){},6228:function(e,t,r){Promise.resolve().then(r.bind(r,9938)),Promise.resolve().then(r.bind(r,1093)),Promise.resolve().then(r.bind(r,4086)),Promise.resolve().then(r.bind(r,2569)),Promise.resolve().then(r.t.bind(r,1936,23)),Promise.resolve().then(r.t.bind(r,8604,23)),Promise.resolve().then(r.t.bind(r,3800,23)),Promise.resolve().then(r.bind(r,2789)),Promise.resolve().then(r.bind(r,5199)),Promise.resolve().then(r.bind(r,6442)),Promise.resolve().then(r.bind(r,8795))},2865:function(e,t,r){"use strict";r.d(t,{default:function(){return o.a}});var n=r(556),o=r.n(n)},556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(7773);r(2514),r(3084);let o=n._(r(2633));function a(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,o.default)({...a,modules:null==(r=a.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4086:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let n=r(8524);function o(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},2633:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let n=r(2514),o=r(3084),a=r(4086),s=r(2569);function i(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,o.lazy)(()=>t.loader().then(i)),c=t.loading;function u(e){let i=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(o.Suspense,{fallback:i,children:l})}return u.displayName="LoadableComponent",u}},2569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let n=r(2514),o=r(1258);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,o.getExpectedRequestStore)("next/dynamic css"),a=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},2789:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var n=r(2514),o=r(2865),a=r(5199),s=r(8795),i=r(3084),l=r(6142),c=r(5151);let u=(0,i.createContext)(null);function d(e){let{children:t}=e,[r]=(0,i.useState)(()=>(0,l.createClientComponentClient)()),o=(0,c.useRouter)();return(0,i.useEffect)(()=>{let{data:{subscription:e}}=r.auth.onAuthStateChange(e=>{"SIGNED_IN"===e&&o.refresh()});return()=>{e.unsubscribe()}},[o,r]),(0,n.jsx)(u.Provider,{value:r,children:t})}r(9564);let f=(0,o.default)(()=>Promise.all([r.e(196),r.e(989)]).then(r.bind(r,5989)),{loadableGenerated:{webpack:()=>[5989]},ssr:!1});function g(e){let{children:t}=e;return(0,n.jsx)(d,{children:(0,n.jsx)(f,{children:(0,n.jsx)(s.UserProvider,{children:(0,n.jsx)(a.AuthProvider,{children:t})})})})}},5199:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return f}});var n=r(2514),o=r(3084),a=r(4111),s=r(6142),i=r(5151);async function l(e){try{let t={id:e,wallet_address:e,nickname:"Wallet ".concat(e.slice(0,4),"...").concat(e.slice(-4)),is_guest:!1,message_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("walletAddress",e),{user:t}}catch(e){throw console.error("Error in signInWithWallet:",e),e}}r(8362);var c=r(6570);let u=(0,o.createContext)({isAuthenticated:!1,getToken:async()=>null,isLoading:!0,error:null,user:null,balance:0,connectWallet:async()=>{},logout:async()=>{},setNickname:async()=>{},loginWithDiscord:async()=>{}});function d(e){let{children:t}=e,[r,d]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!0),[h,m]=(0,o.useState)(null),[w,p]=(0,o.useState)(null),[_,v]=(0,o.useState)(0),{publicKey:b,disconnect:y}=(0,a.O)(),S=(0,s.createClientComponentClient)(),E=(0,i.useRouter)(),k=(0,o.useCallback)(async()=>{try{let e=localStorage.getItem("walletAddress"),t=localStorage.getItem("guestId");if(!e&&!t){g(!1);return}let{data:r,error:n}=await S.from("user_profiles").select("*").or("wallet_address.eq.".concat(e,",guest_id.eq.").concat(t)).single();if(n){if("PGRST116"===n.code){g(!1);return}throw n}r&&(p({id:String(r.id),wallet_address:r.wallet_address,nickname:r.nickname,guest_id:r.guest_id,is_guest:r.is_guest,message_count:r.message_count,created_at:r.created_at,updated_at:r.updated_at,discord_id:r.discord_id||void 0,discord_username:r.discord_username}),d(!0))}catch(e){console.error("Error checking user:",e),m(e instanceof Error?e.message:"Failed to check user")}finally{g(!1)}},[S]);(0,o.useEffect)(()=>{k()},[k]);let P=(0,o.useCallback)(async()=>{if(b)try{g(!0),m(null);let e=b.toString(),t={...(await l(e)).user,guest_id:null};try{let e=new c.ew((0,c.Wf)("devnet")),t=await e.getBalance(b);v(t/c.j5)}catch(e){console.warn("Failed to fetch balance:",e),v(0)}p(t),localStorage.setItem("walletAddress",e),d(!0),E.push("/")}catch(e){console.error("Wallet connection error:",e),m(e instanceof Error?e.message:"Failed to connect wallet"),localStorage.removeItem("walletAddress")}finally{g(!1)}},[b,E]),I=async e=>{g(!0),m(null);try{let t=crypto.randomUUID(),r=new Date().toISOString(),{data:n,error:o}=await S.from("user_profiles").insert({guest_id:t,nickname:e,is_guest:!0,message_count:0,created_at:r,updated_at:r}).select().single();if(o)throw o;localStorage.setItem("guestId",t),p({id:n.id,nickname:n.nickname,guest_id:t,wallet_address:null,is_guest:!0,message_count:0,created_at:r,updated_at:r}),d(!0),E.push("/")}catch(e){throw console.error("Error setting nickname:",e),m(e instanceof Error?e.message:"Failed to set nickname"),e}finally{g(!1)}},j=async()=>{g(!0);try{await S.auth.signOut(),await (null==y?void 0:y()),localStorage.removeItem("walletAddress"),localStorage.removeItem("guestId"),p(null),d(!1),E.push("/login")}catch(e){console.error("Logout error:",e),m(e instanceof Error?e.message:"Failed to logout")}finally{g(!1)}},C=async()=>{try{let e=localStorage.getItem("discord_user_id"),t=localStorage.getItem("discord_username");if(!e||!t)throw Error("Discord credentials not found");let{data:r,error:n}=await S.from("user_profiles").upsert({discord_id:e,nickname:t,discord_username:t,is_guest:!1,message_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{onConflict:"discord_id"}).select().single();if(n)throw n;let o={id:String(r.id),wallet_address:null,guest_id:null,nickname:t,is_guest:!1,message_count:r.message_count,created_at:r.created_at,updated_at:r.updated_at,discord_id:e,discord_username:t};p(o),d(!0),E.push("/")}catch(e){console.error("Discord login error:",e),m(e instanceof Error?e.message:"Failed to login with Discord")}},x=(0,o.useCallback)(async()=>{try{var e,t;let r=await S.auth.getSession();return(null==r?void 0:null===(t=r.data)||void 0===t?void 0:null===(e=t.session)||void 0===e?void 0:e.access_token)||null}catch(e){return console.error("Error getting token:",e),null}},[S.auth]);return(0,n.jsx)(u.Provider,{value:{isAuthenticated:r,getToken:x,isLoading:f,error:h,user:w,balance:_,connectWallet:P,logout:j,setNickname:I,loginWithDiscord:C},children:t})}let f=()=>{let e=(0,o.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},6442:function(e,t,r){"use strict";r.d(t,{ChatProvider:function(){return s},R:function(){return i}});var n=r(2514),o=r(3084);let a=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1);return(0,n.jsx)(a.Provider,{value:{messages:r,currentConversation:i,isLoading:c,setMessages:s,setCurrentConversation:l,setIsLoading:u},children:t})}function i(){let e=(0,o.useContext)(a);if(!e)throw Error("useChat must be used within a ChatProvider");return e}},8795:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return a}});var n=r(2514);let o=(0,r(3084).createContext)(void 0);function a(e){let{children:t}=e;return(0,n.jsx)(o.Provider,{value:{},children:t})}},8362:function(e,t,r){"use strict";r.d(t,{v:function(){return l}});var n=r(7264),o=r.n(n);let a=r(8070).env.DISCORD_CLIENT_SECRET;class s{async getAuthUrl(){try{if(!this.config.CLIENT_ID)return console.error("Discord client ID not configured"),"#";let e=o().randomBytes(32).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),t=await o().createHash("sha256").update(e).digest("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");localStorage.setItem("discord_code_verifier",e),console.log("Generating Discord auth URL with redirect URI:",this.config.REDIRECT_URI);let r=new URLSearchParams({client_id:this.config.CLIENT_ID,redirect_uri:this.config.REDIRECT_URI,response_type:"code",scope:this.config.SCOPES.join(" "),code_challenge:t,code_challenge_method:"S256",prompt:"consent",state:Math.random().toString(36).substring(7)});return"https://discord.com/oauth2/authorize?".concat(r.toString())}catch(e){return console.error("Error generating Discord auth URL:",e),"#"}}async exchangeCode(e,t){throw Error("This method should only be called server-side")}async getUser(e){try{let t=await fetch("https://discord.com/api/users/@me",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){let e=await t.text();throw Error("Failed to get Discord user: ".concat(e))}return t.json()}catch(e){throw console.error("Error getting Discord user:",e),e}}constructor(){this.config={CLIENT_ID:"1304685813346467890",CLIENT_SECRET:a||"",REDIRECT_URI:"".concat("https://elizawakesup.ai","/auth/discord/complete"),SCOPES:["identify"]}}}let i=new s,l=()=>i.getAuthUrl()},9564:function(){},3800:function(){},1936:function(e){e.exports={style:{fontFamily:"'__geistMono_1235f0', '__geistMono_Fallback_1235f0'"},className:"__className_1235f0",variable:"__variable_1235f0"}},8604:function(e){e.exports={style:{fontFamily:"'__geist_1f3b52', '__geist_Fallback_1f3b52'"},className:"__className_1f3b52",variable:"__variable_1f3b52"}},9938:function(e,t,r){"use strict";r.r(t),r.d(t,{Analytics:function(){return d},track:function(){return u}});var n=r(3084),o=()=>{window.va||(window.va=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(window.vaq=window.vaq||[]).push(t)})};function a(){return"undefined"!=typeof window}function s(){return"production"}function i(){return(a()?window.vam:s())||"production"}function l(){return"production"===i()}function c(){return"development"===i()}function u(e,t,r){var n,o;if(!a()){let e="[Vercel Web Analytics] Please import `track` from `@vercel/analytics/server` when using this function in a server environment";if(l())console.warn(e);else throw Error(e);return}if(!t){null==(n=window.va)||n.call(window,"event",{name:e,options:r});return}try{let n=function(e,t){if(!e)return;let r=e,n=[];for(let[o,a]of Object.entries(e))"object"==typeof a&&null!==a&&(t.strip?r=function(e,t){let{[e]:r,...n}=t;return n}(o,r):n.push(o));if(n.length>0&&!t.strip)throw Error("The following properties are not valid: ".concat(n.join(", "),". Only strings, numbers, booleans, and null are allowed."));return r}(t,{strip:l()});null==(o=window.va)||o.call(window,"event",{name:e,data:n,options:r})}catch(e){e instanceof Error&&c()&&console.error(e)}}function d(e){return(0,n.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,n.useEffect)(()=>{!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!0};if(!a())return;(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";if("auto"===e){window.vam=s();return}window.vam=e})(t.mode),o(),t.beforeSend&&(null==(e=window.va)||e.call(window,"beforeSend",t.beforeSend));let r=t.scriptSrc||(c()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js");if(document.head.querySelector('script[src*="'.concat(r,'"]')))return;let n=document.createElement("script");n.src=r,n.defer=!0,n.dataset.sdkn="@vercel/analytics"+(t.framework?"/".concat(t.framework):""),n.dataset.sdkv="1.4.0",t.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),t.endpoint&&(n.dataset.endpoint=t.endpoint),t.dsn&&(n.dataset.dsn=t.dsn),n.onerror=()=>{let e=c()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log("[Vercel Web Analytics] Failed to load script from ".concat(r,". ").concat(e))},c()&&!1===t.debug&&(n.dataset.debug="false"),document.head.appendChild(n)}({framework:e.framework||"react",...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,n.useEffect)(()=>{e.route&&e.path&&function(e){var t;let{route:r,path:n}=e;null==(t=window.va)||t.call(window,"pageview",{route:r,path:n})}({route:e.route,path:e.path})},[e.route,e.path]),null}},1093:function(e,t,r){"use strict";r.r(t),r.d(t,{SpeedInsights:function(){return h}});var n=r(3084),o=r(5151),a=()=>{window.si||(window.si=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(window.siq=window.siq||[]).push(t)})};function s(){return false}function i(e){return new RegExp("/".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(?=[/?#]|$)"))}var l="https://va.vercel-scripts.com/v1/speed-insights",c="".concat(l,"/script.js"),u="".concat(l,"/script.debug.js");function d(e){(0,n.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);let t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(t.current)e.route&&t.current(e.route);else{let r=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!("undefined"!=typeof window)||null===t.route)return null;a();let r=!!t.dsn,n=t.scriptSrc||(r?c:"/_vercel/speed-insights/script.js");if(document.head.querySelector('script[src*="'.concat(n,'"]')))return null;t.beforeSend&&(null==(e=window.si)||e.call(window,"beforeSend",t.beforeSend));let o=document.createElement("script");return o.src=n,o.defer=!0,o.dataset.sdkn="@vercel/speed-insights"+(t.framework?"/".concat(t.framework):""),o.dataset.sdkv="1.1.0",t.sampleRate&&(o.dataset.sampleRate=t.sampleRate.toString()),t.route&&(o.dataset.route=t.route),t.endpoint&&(o.dataset.endpoint=t.endpoint),t.dsn&&(o.dataset.dsn=t.dsn),o.onerror=()=>{console.log("[Vercel Speed Insights] Failed to load script from ".concat(n,". Please check if any content blockers are enabled and try again."))},document.head.appendChild(o),{setRoute:e=>{o.dataset.route=null!=e?e:void 0}}}({framework:e.framework||"react",...e});r&&(t.current=r.setRoute)}},[e.route]),null}var f=()=>{let e=(0,o.useParams)(),t=(0,o.useSearchParams)()||new URLSearchParams,r=(0,o.usePathname)();return e?function(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,n]of e)if(!Array.isArray(n)){let e=i(n);e.test(r)&&(r=r.replace(e,"/[".concat(t,"]")))}for(let[t,n]of e)if(Array.isArray(n)){let e=i(n.join("/"));e.test(r)&&(r=r.replace(e,"/[...".concat(t,"]")))}return r}catch(t){return e}}(r,Object.keys(e).length?e:Object.fromEntries(t.entries())):null};function g(e){let t=f();return n.createElement(d,{route:t,...e,framework:"next"})}function h(e){return n.createElement(n.Suspense,{fallback:null},n.createElement(g,{...e}))}}},function(e){e.O(0,[52,177,919,114,945,787,744],function(){return e(e.s=6228)}),_N_E=e.O()}]);